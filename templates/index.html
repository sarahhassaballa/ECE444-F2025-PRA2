{% extends "base.html" %}
<!--Example 4-3-->
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Flasky{% endblock %}

{% block page_content %}
<div class = "page-header">
    <h1>Hello, {% if name %}{{ name }}{% else %}Stranger{% endif %}!</h1>
    {% if email %}
        <h1>{% if 'utoronto' in email %}Your U of T email is {{ email }}{% else %}Please use your UofT email. {% endif %}</h1> 
    {% endif %}    
</div>

<form method="POST" action="{{ url_for('index') }}">
    {{ form.hidden_tag() }}

    <div class="form-group">
        {{ form.name.label(class="form-label") }}
        {{ form.name(class="form-control", id="name", required=True) }}
    </div>

    <div class="form-group">
        {{ form.email.label(class="form-label") }}
        {{ form.email(class="form-control", id="email", required=True) }}
    </div>

    <div class="form-group">
        {{ form.submit(class="btn btn-primary") }}
    </div>
</form>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const emailInput = document.getElementById('email');

    emailInput.addEventListener('input', function () {
        if (!emailInput.value.includes('@')) {
            emailInput.setCustomValidity(`Please include an @ in the email address. '${emailInput.value}' is missing an '@'.`);
        } else {
            emailInput.setCustomValidity('');
        }
    });
});
</script>

<!--Example 3-14
<p>The local date and time is {{ moment(current_time).format('LLL') }}.</p>
<p>That was {{ moment(current_time).fromNow(refresh=True) }}</p>-->

{% endblock %}